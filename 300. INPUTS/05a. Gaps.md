---
type: gaps
---

# Deklaracja zmiennej VAR

Chcesz utworzyć miarę z dwiema zmiennymi: Ilość i Cena, a następnie zwrócić ich iloczyn. Jak uzupełnić kod?

## Dostępne funkcje
- VAR
- LET
- DECLARE
- RETURN

## Kod do uzupełnienia

```dax
DAX
Wartość =
[SLOT:0] Ilość = 100
VAR Cena = 25
[SLOT:1] Ilość * Cena
```

## Poprawne rozwiązanie
VAR, RETURN

## Feedback poprawny
✅ Brawo! Rozwiązanie poprawne!

W DAX zmienne deklarujesz słowem kluczowym `VAR`, a wynik zwracasz słowem `RETURN`. Każda zmienna rozpoczyna się od `VAR`. Składnia: `VAR nazwa = wyrażenie`. Może być wiele zmiennych VAR, ale tylko jedno RETURN na końcu. RETURN określa, co zostanie zwrócone jako wynik miary.

---

# VAR w funkcjach iteracyjnych

Co się dzieje ze zmiennymi VAR wewnątrz funkcji SUMX?

## Dostępne funkcje
- Są obliczane raz przed iteracją
- Są obliczane na nowo dla każdego wiersza
- Są obliczane tylko dla pierwszego wiersza
- Wywołują błąd - VAR nie może być w SUMX

## Kod do uzupełnienia

```dax
DAX
SUMX(
    {1, 2, 3},
    VAR Kwadrat = [Value] * [Value]
    RETURN Kwadrat
)

-- Zmienna Kwadrat jest: [SLOT:0]
```

## Poprawne rozwiązanie
Są obliczane na nowo dla każdego wiersza

## Feedback poprawny
✅ Brawo! Rozwiązanie poprawne!

W funkcjach iteracyjnych jak `SUMX`, `FILTER`, `ADDCOLUMNS` zmienne VAR są **obliczane w każdej iteracji** z wartościami z aktualnego wiersza. Dla każdego wiersza tabeli zmienna jest tworzona od nowa. To oznacza, że zmienne VAR wewnątrz iteracji są dynamiczne i dostosowują się do kontekstu wiersza. W przykładzie: dla 1 zwróci 1, dla 2 zwróci 4, dla 3 zwróci 9.


---

# Zmienne VAR poza i wewnątrz iteracji

Masz zmienną Średnia zadeklarowaną PRZED SUMX i zmienną Wartość WEWNĄTRZ SUMX. Która jest obliczana wielokrotnie?

## Dostępne funkcje
- Jednokrotnie
- Per Wiersz
- Ani razu
- Dwa razy

## Kod do uzupełnienia

```dax
DAX
Suma Odchyleń =
VAR Średnia = AVERAGE({1, 2, 3})  -- Obliczona: [SLOT:0]
RETURN
    SUMX(
        {1, 2, 3},
        VAR Wartość = [Value]  -- Obliczona: [SLOT:1]
        RETURN Wartość - Średnia
    )
```

## Poprawne rozwiązanie
Jednokrotnie, Per Wiersz

## Feedback poprawny
✅ Brawo! Rozwiązanie poprawne!

Zmienna `Średnia` jest PRZED SUMX, więc obliczana **tylko raz** i ma stałą wartość (3). Zmienna `Wartość` jest WEWNĄTRZ SUMX, więc obliczana **dla każdego wiersza** osobno (1, 2, 3). Zmienne poza iteracją są statyczne, zmienne wewnątrz iteracji są dynamiczne. To pozwala porównywać każdy wiersz (Wartość) ze stałą (Średnia).

---

# Query View - słowo kluczowe EVALUATE

Co jest wymagane na początku zapytania w DAX Query View?

## Dostępne funkcje
- EVALUATE
- SELECT
- QUERY
- BEGIN

## Kod do uzupełnienia

```dax
DAX
[SLOT:0]
    ROW(Test, 1 + 1)
```

## Poprawne rozwiązanie
EVALUATE

## Feedback poprawny
✅ Brawo! Rozwiązanie poprawne!

W Query View zapytania DAX muszą zaczynać się od słowa kluczowego `EVALUATE`. Po nim umieszczasz wyrażenie zwracające tabelę (np. `ROW()`, `SUMMARIZECOLUMNS()`, nazwę tabeli). Query View służy do testowania zapytań DAX bez tworzenia miar w modelu. `EVALUATE` mówi silnikowi DAX: wykonaj to zapytanie i zwróć wynik tabelaryczny.


---

# DEFINE MEASURE w Query View

Do czego służy DEFINE MEASURE w zapytaniu DAX?

## Dostępne funkcje
- SET
- DEFINE MEASURE
- DEF
- EVALUATE
## Kod do uzupełnienia

```dax
DAX
[SLOT:0] _Measures[Test] =
    VAR A = 1
    VAR B = 5
    RETURN A + B

EVALUATE
    ROW(Wynik, [Test])
```

## Poprawne rozwiązanie
DEFINE MEASURE

## Feedback poprawny
✅ Brawo! Rozwiązanie poprawne!

`DEFINE MEASURE` tworzy **tymczasową miarę** dostępną tylko w kontekście tego zapytania - nie dodaje jej do modelu danych. To przydatne do testowania i prototypowania miar bez zaśmiecania modelu. Miara istnieje tylko podczas wykonywania zapytania i znika po jego zakończeniu. Po `DEFINE` następuje `EVALUATE` z właściwym zapytaniem używającym zdefiniowanej miary.


---

# ROW - tworzenie jednoierszowej tabeli

Query View zwraca tylko tabele, co tworzy tabelę z jednego wiersza

## Dostępne funkcje
- ROW
- EVALUATE
- DEFINE

## Kod do uzupełnienia

```dax
DAX
EVALUATE
    VAR A = 1
    VAR B = 5
RETURN
    [SLOT:0](Suma, A + B)
```

## Poprawne rozwiązanie
ROW

## Feedback poprawny
✅ Brawo! Rozwiązanie poprawne!

DAX w Query View (po `EVALUATE`) może zwracać **tylko wartości tabelaryczne**. Wyrażenie `A + B` zwraca pojedynczą wartość (skalar), nie tabelę. Funkcja `ROW()` tworzy sztuczną tabelę z jednym wierszem i jedną kolumną, dzięki czemu możemy zwrócić wynik skalara jako tabelę. Składnia: `ROW(nazwa kolumny, wartość)`.

## Wskazówka
Materiał wyjaśnia: DAX potrafi zwracać wyłącznie wartości tabelaryczne. A + B zwraca pojedynczą wartość. 
