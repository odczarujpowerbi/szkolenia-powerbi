---
type: teoria
---
# Nazewnictwo

## Dlaczego konwencje sÄ… waÅ¼ne?

W maÅ‚ych modelach danych nazewnictwo moÅ¼e wydawaÄ‡ siÄ™ nieistotne, ale wraz z rozrostem projektu:

- **Trudniej znaleÅºÄ‡** wÅ‚aÅ›ciwÄ… tabelÄ™ lub miarÄ™
- **CiÄ™Å¼ko rozrÃ³Å¼niÄ‡** tabele faktÃ³w od wymiarÃ³w
- **Problemy z konserwacjÄ…** modelu przez innych uÅ¼ytkownikÃ³w
- **Wolniejsza praca** z modelem

Dobra konwencja nazewnicza to **fundament profesjonalnego modelu danych**.

---

## Tabele faktÃ³w (Fact Tables)

**Charakterystyka:**
- ZawierajÄ… **zdarzenia biznesowe** (transakcje, zamÃ³wienia, faktury)
- MajÄ… **wiele wierszy** (setki tysiÄ™cy, miliony)
- ZawierajÄ… **wartoÅ›ci numeryczne** do agregacji
- ÅÄ…czÄ… siÄ™ z tabelami wymiarÃ³w przez **klucze obce**

**Konwencja nazewnicza:**

```
PrzykÅ‚ady:
âœ… Fakt_Sprzedaz
âœ… fSprzedaz
âœ… F_Sprzedaz
```

---

## Tabele wymiarÃ³w (Dimension Tables)

**Charakterystyka:**
- ZawierajÄ… **atrybuty opisowe** (nazwy, kategorie, opisy)
- MajÄ… **relatywnie maÅ‚o wierszy** (dziesiÄ…tki, tysiÄ…ce)
- SÅ‚uÅ¼Ä… do **filtrowania i grupowania**
- ÅÄ…czÄ… siÄ™ z faktami przez **klucz gÅ‚Ã³wny**

**Konwencja nazewnicza:**

```
PrzykÅ‚ady:
âœ… Dim_Produkty
âœ… D_Produkty
âœ… dProdukty
```

## Tabela kalendarzowa (Date Table)

**Charakterystyka:**
- **Jedna data = jeden wiersz**
- Zawiera wszystkie daty w zakresie analizy **bez luk**
- Zawiera atrybuty czasowe (rok, kwartaÅ‚, miesiÄ…c, dzieÅ„ tygodnia)
- **Kluczowa** dla funkcji Time Intelligence

**Konwencja nazewnicza:**

```
Pojedyncza nazwa
PrzykÅ‚ady:
âœ… dKalendarz
âœ… dDaty
âœ… D_Data
âœ… DimData
```

---

## Tabele pomocnicze (Helper Tables)

**Charakterystyka:**

- Tabele **bez relacji** z resztÄ… modelu
- SÅ‚uÅ¼Ä… do **parametryzacji** miar
- UÅ¼ywane z funkcjami `SELECTEDVALUE()` lub `SWITCH()`

**Konwencja nazewnicza:**

```
Prefix: Parametr_ lub P_
PrzykÅ‚ady:
âœ… Param_Waluty
âœ… P_Waluty
âœ… pWaluty
```
---

## Tabele z miarami (Measure Tables)

**Charakterystyka:**

- **Pusta tabela** (0 wierszy)
- SÅ‚uÅ¼y **tylko do organizacji miar**
- Åatwiejsza nawigacja w modelu

**Konwencja nazewnicza:**

```
Prefix: _Miary lub ikona
PrzykÅ‚ady:
âœ… _Miary
âœ… _Measures
âœ… _Miary_Sprzedaz
```

**Jak stworzyÄ‡:**

```dax
_Miary = BLANK()
```

# Rola modelu

## Czym jest model danych w Power BI?

**Model danych** to:

- **Struktura relacji** miÄ™dzy tabelami
- **Schemat gwiazdowy** (star schema) lub **schemat pÅ‚atka Å›niegu** (snowflake schema)
- **Logiczna warstwa** miÄ™dzy danymi ÅºrÃ³dÅ‚owymi a wizualizacjami
- **Fundament** dla szybkich i poprawnych obliczeÅ„ DAX

## Schemat gwiazdowy (Star Schema)

### Charakterystyka

**Centrum:** Tabela faktÃ³w (Fakt_Sprzedaz)  
**Ramiona:** Tabele wymiarÃ³w (Produkty, Klienci, Kalendarz)

```
        Kalendarz
            â†“
    Produkty â†’ Fakt_Sprzedaz â† Klienci
            â†“
        Regiony
```

### Zalety schematu gwiazdowego:

âœ… **Prosty i czytelny**  
âœ… **Szybkie zapytania** (mniej zÅ‚Ä…czeÅ„)  
âœ… **Åatwa rozbudowa**  
âœ… **Intuicyjny dla uÅ¼ytkownikÃ³w**  
âœ… **Optymalny dla Power BI**

### Zasady:

- Tabele wymiarÃ³w **nie Å‚Ä…czÄ… siÄ™** miÄ™dzy sobÄ…
- Wszystkie wymiary Å‚Ä…czÄ… siÄ™ **bezpoÅ›rednio z faktami**
- **Jeden fakt = jeden wiersz transakcji**

---

## Schemat pÅ‚atka Å›niegu (Snowflake Schema)

### Charakterystyka

Tabele wymiarÃ³w sÄ… **znormalizowane** (podzielone na pod-tabele)

```
                    Kalendarz
                        â†“
Producent â†’ Kategoria â†’ Produkty â†’ Fakt_Sprzedaz â† Klienci â†’ Miasta â†’ Regiony
```

### Wady w Power BI:

âŒ **Wolniejsze zapytania** (wiÄ™cej zÅ‚Ä…czeÅ„)  
âŒ **Bardziej skomplikowany**  
âŒ **CiÄ™Å¼szy w utrzymaniu**  
âŒ **Mniej intuicyjny**

### Kiedy uÅ¼ywaÄ‡:

- Gdy **musisz** zaoszczÄ™dziÄ‡ pamiÄ™Ä‡ (rzadkie w Power BI)
- Gdy dane przychodzÄ… z systemu ÅºrÃ³dÅ‚owego w tej strukturze
- **Zalecenie:** Zazwyczaj lepiej **spÅ‚aszczyÄ‡** do gwiazdy w Power Query

---

## Najlepsze praktyki modelowania

### 1. Jeden kierunek filtrowania

```
âœ… DOBRE:
Produkty (1) â†’ (âˆ) Fakt_Sprzedaz
Filtr pÅ‚ynie: Produkty â†’ Fakty

âŒ ZÅE:
Produkty (1) â†” (âˆ) Fakt_Sprzedaz
Dwukierunkowy filtr (unikaj!)
```

### 2. Tabela kalendarzowa

```dax
Kalendarz = 
ADDCOLUMNS(
    CALENDAR(DATE(2020,1,1), DATE(2025,12,31)),
    "Rok", YEAR([Date]),
    "Miesiac", FORMAT([Date], "YYYY-MM"),
    "Kwartal", "Q" & QUARTER([Date]),
    "Dzien Tygodnia", FORMAT([Date], "dddd", "pl-PL")
)
```

**Relacja:**

```
Kalendarz[Data] (1) â†’ (âˆ) Fakt_Sprzedaz[Data]
```

**Oznacz jako tabelÄ™ dat:**

- Prawy przycisk na `Kalendarz` â†’ **Oznacz jako tabelÄ™ dat**
- Wybierz kolumnÄ™ `Data`

### 3. Unikaj kolumn kalkulowanych w faktach

```
âŒ ZÅE (zajmuje pamiÄ™Ä‡):
Marza PLN = Fakt_Sprzedaz[Wartosc] - Fakt_Sprzedaz[Koszt]
(milion wierszy Ã— wartoÅ›Ä‡ = duÅ¼o pamiÄ™ci)

âœ… DOBRE (obliczane dynamicznie):
Marza PLN = SUM(Fakt_Sprzedaz[Wartosc]) - SUM(Fakt_Sprzedaz[Koszt])
(miara, 0 bajtÃ³w pamiÄ™ci)
```

### 4. Zachowaj klucze numeryczne

```
âœ… DOBRE:
ID_Produktu: 1, 2, 3, 4
Typ danych: Liczba caÅ‚kowita

âŒ ZÅE:
ID_Produktu: "PROD001", "PROD002"
Typ danych: Tekst (wolniejsze zÅ‚Ä…czenia)
```

### 5. UsuÅ„ zbÄ™dne kolumny

**W Power Query przed zaÅ‚adowaniem:**

- UsuÅ„ kolumny, ktÃ³re **nie sÄ… uÅ¼ywane**
- UsuÅ„ duplikaty kluczy w wymiarach
- UsuÅ„ kolumny z danymi wraÅ¼liwymi

### 6. Role-playing dimensions

**Problem:** Jedna tabela Kalendarz, wiele dat w faktach

```
Fakt_Zamowienia:
- Data_Zamowienia
- Data_Wysylki
- Data_Platnosci
```

**RozwiÄ…zanie:** Nieaktywne relacje + USERELATIONSHIP

```dax
Sprzedaz wg Daty Wysylki = 
CALCULATE(
    [Sprzedaz Netto],
    USERELATIONSHIP(Fakt_Zamowienia[Data_Wysylki], Kalendarz[Data])
)
```

---


# Tipy

## WydajnoÅ›Ä‡ modelu

### Optymalizacja pamiÄ™ci

**1. ZmieÅ„ typy danych:**

```
âŒ Tekst: "123" (8 bajtÃ³w)
âœ… Liczba caÅ‚kowita: 123 (2-4 bajty)
```

**2. UsuÅ„ zbÄ™dne kolumny:**

- W Power Query: UsuÅ„ kolumny przed Load
- Mniejszy model = szybsze odÅ›wieÅ¼anie

**3. UÅ¼ywaj kolumn caÅ‚kowitych zamiast dziesiÄ™tnych:**

```
âŒ Decimal: 123.45 (8 bajtÃ³w)
âœ… Integer: 123 (2-4 bajty)
```

**4. Kompresja kolumn tekstowych:**

- Power BI automatycznie kompresuje powtarzajÄ…ce siÄ™ wartoÅ›ci
- Kolumny z maÅ‚Ä… kardynalnoÅ›ciÄ… (maÅ‚o unikalnych wartoÅ›ci) zajmujÄ… mniej pamiÄ™ci

### Optymalizacja wydajnoÅ›ci zapytaÅ„

**1. Minimalizuj liczbÄ™ relacji:**

```
âœ… Star Schema: 1 zÅ‚Ä…czenie (Wymiar â†’ Fakt)
âŒ Snowflake: 2-3 zÅ‚Ä…czenia (Wymiar â†’ Pod-wymiar â†’ Fakt)
```

**2. UÅ¼ywaj miar zamiast kolumn kalkulowanych:**

```
âŒ Kolumna: 1 000 000 wierszy Ã— 8 bajtÃ³w = 8 MB
âœ… Miara: 0 bajtÃ³w (obliczana na Å¼Ä…danie)
```

**3. Agreguj dane w Power Query gdy moÅ¼liwe:**

```
JeÅ›li potrzebujesz tylko sum miesiÄ™cznych,
zagreguj dane juÅ¼ w Power Query
zamiast trzymaÄ‡ codzienne szczegÃ³Å‚y
```

---

## Checklist profesjonalnego modelu

### Struktura:

- [ ] Schemat gwiazdowy (star schema)
- [ ] Jedna tabela kalendarzowa oznaczona jako tabela dat
- [ ] Wszystkie relacje typu 1:âˆ (jeden do wielu)
- [ ] Jednokierunkowe filtrowanie (wymiar â†’ fakt)
- [ ] Klucze numeryczne zamiast tekstowych
- [ ] Brak duplikatÃ³w kluczy w wymiarach

### Nazewnictwo:

- [ ] Konsekwentne nazwy tabel (Fakt_, Dim_, Kalendarz)
- [ ] Konsekwentne nazwy kluczy (ID_Produktu)
- [ ] Opisowe nazwy miar (Sprzedaz Netto, Sprzedaz YTD)
- [ ] Tabela _Miary dla organizacji miar
- [ ] Miary pomocnicze z prefiksem `_`

### WydajnoÅ›Ä‡:

- [ ] Optymalne typy danych (Integer zamiast Decimal)
- [ ] UsuniÄ™te zbÄ™dne kolumny
- [ ] Miary zamiast kolumn kalkulowanych dla agregacji
- [ ] Brak niepotrzebnych relacji dwukierunkowych

### Dokumentacja:

- [ ] Opisy tabel (WÅ‚aÅ›ciwoÅ›ci â†’ Opis)
- [ ] Opisy miar w komentarzach DAX
- [ ] Nazwy miar zgodne z konwencjÄ… biznesowÄ…

---

## Podsumowanie

âœ… **Model danych** = fundament kaÅ¼dego raportu Power BI  
âœ… **Schemat gwiazdowy** = preferowany w Power BI  
âœ… **Konwencje nazewnicze** = Å‚atwiejsza praca w zespole  
âœ… **Optymalizacja** = szybsze odÅ›wieÅ¼anie i zapytania  
âœ… **Dokumentacja** = Å‚atwiejsze utrzymanie

ğŸ’¡ **PamiÄ™taj:** Dobry model danych to 80% sukcesu w Power BI. Reszta to tylko DAX i wizualizacje!
# Kolumny vs. Miary
## Dwa podejÅ›cia do DAX

JednÄ… z najwaÅ¼niejszych rzeczy do zrozumienia w DAX jest rÃ³Å¼nica miÄ™dzy **miarami** a **kolumnami kalkulowanymi**. ChoÄ‡ obie uÅ¼ywajÄ… formuÅ‚ DAX, dziaÅ‚ajÄ… zupeÅ‚nie inaczej i wymagajÄ… **odmiennego podejÅ›cia do pisania kodu**.

## Kolumny kalkulowane (Calculated Columns)

**Kolumna kalkulowana** to nowa kolumna dodana do tabeli, ktÃ³rej wartoÅ›Ä‡ jest obliczana **wiersz po wierszu** (tzw. kontekst wiersza) w momencie odÅ›wieÅ¼ania danych.

### Charakterystyka kolumn kalkulowanych:

- Obliczane **podczas Å‚adowania/odÅ›wieÅ¼ania danych**
- WartoÅ›Ä‡ obliczana **dla kaÅ¼dego wiersza** w tabeli
- Wynik jest **przechowywany** w modelu (zajmuje miejsce w pamiÄ™ci)
- MoÅ¼na ich uÅ¼ywaÄ‡ do **filtrowania**, **grupowania** lub **sortowania**
- UÅ¼ywajÄ… **kontekstu wiersza** (row context)

### PrzykÅ‚ad kolumny kalkulowanej:

```dax
DAX
Cena Jednostkowa =
SprzedaÅ¼[WartoÅ›Ä‡ netto] / SprzedaÅ¼[IloÅ›Ä‡]
```

**Co siÄ™ dzieje:**

- FormuÅ‚a jest obliczana **dla kaÅ¼dego wiersza** w tabeli SprzedaÅ¼
- JeÅ›li masz 1000 wierszy, otrzymasz 1000 wartoÅ›ci
- WartoÅ›ci sÄ… zapisane w modelu i widoczne w widoku danych
- MoÅ¼esz uÅ¼yÄ‡ tej kolumny w slicerach, filtrach lub do sortowania

### PodejÅ›cie do pisania DAX w kolumnach

**W kolumnach moÅ¼esz operowaÄ‡ na kolumnach jak na zmiennych:**

```dax
DAX
// âœ… W KOLUMNACH - bezpoÅ›rednie odwoÅ‚ania do kolumn
MarÅ¼a PLN = SprzedaÅ¼[WartoÅ›Ä‡ netto] - SprzedaÅ¼[Koszt]

MarÅ¼a % = 
DIVIDE(
    SprzedaÅ¼[WartoÅ›Ä‡ netto] - SprzedaÅ¼[Koszt],
    SprzedaÅ¼[WartoÅ›Ä‡ netto]
)

Cena z VAT = SprzedaÅ¼[Cena netto] * 1.23

Kategoria cenowa = 
IF(
    SprzedaÅ¼[WartoÅ›Ä‡ netto] > 1000,
    "Premium",
    "Standard"
)
```

**MoÅ¼esz:**

- âœ“ OdwoÅ‚ywaÄ‡ siÄ™ bezpoÅ›rednio do kolumn: `Tabela[Kolumna]`
- âœ“ UÅ¼ywaÄ‡ standardowych operatorÃ³w: `+`, `-`, `*`, `/`
- âœ“ MnoÅ¼yÄ‡, dzieliÄ‡, dodawaÄ‡ kolumny jak w Excelu
- âœ“ UÅ¼ywaÄ‡ funkcji logicznych: `IF`, `SWITCH`
- âœ“ OdwoÅ‚ywaÄ‡ siÄ™ do innych kolumn kalkulowanych w tej samej tabeli

**Kiedy uÅ¼ywaÄ‡ kolumn kalkulowanych:**

- Potrzebujesz wartoÅ›ci do **filtrowania** lub **grupowania**
- Chcesz **posortowaÄ‡** dane wedÅ‚ug obliczonej wartoÅ›ci
- WartoÅ›Ä‡ zaleÅ¼y **tylko od danych w bieÅ¼Ä…cym wierszu**
- PrzykÅ‚ad: kategoria cenowa produktu, wiek klienta, dzieÅ„ tygodnia, rabat procentowy

---

## Miary (Measures)

**Miara** to formuÅ‚a, ktÃ³ra oblicza siÄ™ **dynamicznie** w zaleÅ¼noÅ›ci od kontekstu filtrÃ³w w raporcie.

### Charakterystyka miar:

- Obliczane **w momencie wyÅ›wietlania** w wizualizacji
- Nie sÄ… przechowywane w modelu (nie zajmujÄ… miejsca)
- Wynik zaleÅ¼y od **kontekstu filtrÃ³w** na wizualizacji
- **Nie moÅ¼na** ich uÅ¼yÄ‡ do filtrowania wierszy
- UÅ¼ywajÄ… **kontekstu filtrÃ³w** (filter context)

### PrzykÅ‚ad miary:

```dax
DAX
SprzedaÅ¼ Netto = SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto])
```

**Co siÄ™ dzieje:**

- FormuÅ‚a oblicza sumÄ™ **w zaleÅ¼noÅ›ci od kontekstu**
- Na wykresie wedÅ‚ug kategorii: pokaÅ¼e sumÄ™ dla kaÅ¼dej kategorii
- Na wykresie wedÅ‚ug regionu: pokaÅ¼e sumÄ™ dla kaÅ¼dego regionu
- Bez filtrÃ³w: pokaÅ¼e sumÄ™ caÅ‚kowitÄ…
- WartoÅ›Ä‡ **nie jest przechowywana**, tylko obliczana na Å¼Ä…danie

### PodejÅ›cie do pisania DAX w miarach

**W miarach MUSISZ uÅ¼ywaÄ‡ funkcji agregujÄ…cych:**

```dax
DAX
// âŒ ZÅE - nie zadziaÅ‚a w miarze
MarÅ¼a PLN = SprzedaÅ¼[WartoÅ›Ä‡ netto] - SprzedaÅ¼[Koszt]

// âœ… DOBRE - w miarach uÅ¼ywamy funkcji agregujÄ…cych
MarÅ¼a PLN = 
SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto]) - SUM(SprzedaÅ¼[Koszt])

// âŒ ZÅE - prÃ³ba mnoÅ¼enia kolumn
WartoÅ›Ä‡ z VAT = SprzedaÅ¼[WartoÅ›Ä‡ netto] * 1.23

// âœ… DOBRE - suma z mnoÅ¼nikiem
WartoÅ›Ä‡ z VAT = SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto]) * 1.23

// âŒ ZÅE - bezpoÅ›rednie dzielenie kolumn
MarÅ¼a % = 
(SprzedaÅ¼[WartoÅ›Ä‡ netto] - SprzedaÅ¼[Koszt]) / SprzedaÅ¼[WartoÅ›Ä‡ netto]

// âœ… DOBRE - dzielenie zagregowanych wartoÅ›ci
MarÅ¼a % = 
DIVIDE(
    SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto]) - SUM(SprzedaÅ¼[Koszt]),
    SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto])
)
```

**W miarach:**

- âŒ **NIE MOÅ»ESZ** bezpoÅ›rednio mnoÅ¼yÄ‡/dzieliÄ‡ kolumn
- âŒ **NIE MOÅ»ESZ** uÅ¼ywaÄ‡ `Tabela[Kolumna]` bez funkcji agregujÄ…cej
- âœ… **MUSISZ** najpierw zagregowaÄ‡: `SUM()`, `AVERAGE()`, `COUNT()`, itp.
- âœ… Dopiero **zagregowane wartoÅ›ci** moÅ¼esz mnoÅ¼yÄ‡, dzieliÄ‡, dodawaÄ‡

**Kiedy uÅ¼ywaÄ‡ miar:**

- Potrzebujesz **agregacji** (suma, Å›rednia, liczba)
- Wynik ma zaleÅ¼eÄ‡ od **filtrÃ³w w raporcie**
- Chcesz **dynamicznych obliczeÅ„** (procent udziaÅ‚u, porÃ³wnania okresÃ³w)
- PrzykÅ‚ad: suma sprzedaÅ¼y, Å›rednia wartoÅ›Ä‡, liczba transakcji

---

## PorÃ³wnanie: Kolumna kalkulowana vs Miara

|Aspekt|Kolumna kalkulowana|Miara|
|---|---|---|
|**Kiedy obliczana**|Podczas odÅ›wieÅ¼ania danych|Podczas wyÅ›wietlania wizualizacji|
|**Kontekst**|Kontekst wiersza (row context)|Kontekst filtrÃ³w (filter context)|
|**SkÅ‚adnia DAX**|BezpoÅ›rednie odwoÅ‚ania do kolumn|Wymagane funkcje agregujÄ…ce|
|**Operacje na kolumnach**|MoÅ¼esz mnoÅ¼yÄ‡/dzieliÄ‡ kolumny bezpoÅ›rednio|Musisz najpierw zagregowaÄ‡, potem mnoÅ¼yÄ‡/dzieliÄ‡|
|**Przechowywanie**|Tak - zajmuje miejsce w pamiÄ™ci|Nie - obliczana na Å¼Ä…danie|
|**UÅ¼ycie w slicerach**|Tak|Nie|
|**UÅ¼ycie w wizualizacjach**|Jako pole do grupowania|Jako wartoÅ›Ä‡ do agregacji|
|**Ikona w Power BI**|Ikona tabeli (âš)|Ikona kalkulatora (fx)|

---

# RÃ³Å¼nice podejÅ›c
## Kluczowa rÃ³Å¼nica w podejÅ›ciu do DAX

### W kolumnach: "MyÅ›l wierszami"

```dax
DAX
// Pracujesz na JEDNYM wierszu naraz
// MoÅ¼esz traktowaÄ‡ kolumny jak zmienne

Rabat Kwotowy = SprzedaÅ¼[Cena] * SprzedaÅ¼[Procent rabatu]

WartoÅ›Ä‡ koÅ„cowa = SprzedaÅ¼[Cena] - SprzedaÅ¼[Rabat Kwotowy]

Kategoria = 
SWITCH(
    TRUE(),
    SprzedaÅ¼[WartoÅ›Ä‡] < 100, "Niska",
    SprzedaÅ¼[WartoÅ›Ä‡] < 500, "Åšrednia",
    "Wysoka"
)
```

### W miarach: "MyÅ›l agregacjÄ…"
NajproÅ›ciej mÃ³wiÄ…c, w miarach:
- Pracujesz na ZBIORZE wierszy
- Musisz najpierw zagregowaÄ‡, potem obliczaÄ‡

```dax
DAX
// âŒ To nie zadziaÅ‚a:
Rabat Kwotowy = SprzedaÅ¼[Cena] * SprzedaÅ¼[Procent rabatu]

// âœ… Tak trzeba:
Rabat Kwotowy = SUMX(SprzedaÅ¼, SprzedaÅ¼[Cena] * SprzedaÅ¼[Procent rabatu])
// lub
Rabat Kwotowy = SUM(SprzedaÅ¼[Cena]) * AVERAGE(SprzedaÅ¼[Procent rabatu])
```

**Uwaga!**
- LiczÄ…c z `SUMX` obliczasz: (1000 Ã— 10%) + (2000 Ã— 5%) + (500 Ã— 20%) = 100 + 100 + 100 = **300**
- Natomiast z `SUM` i `AVERAGE`: (1000 + 2000 + 500) Ã— (10%, 5%, 20%) / 3 = **408**
	- W pierwszym przypadku otrzymujemy sumÄ™ kwoty rabatÃ³w, a w drugim kwotÄ™ dla przeciÄ™tnego rabatu
- WiÄ™cej w dziale o **Iteratorach**
---

## Praktyczny przykÅ‚ad rÃ³Å¼nicy

### Scenariusz: Obliczenie marÅ¼y

**Tabela SprzedaÅ¼:**

| Kategoria | WartoÅ›Ä‡ netto | Koszt |
| --------- | ------------- | ----- |
| NAPOJE    | 1000          | 600   |
| WINA      | 2000          | 1400  |
| PRZEKÄ„SKI | 500           | 350   |

### Jako kolumna kalkulowana:

```dax
DAX
MarÅ¼a PLN = SprzedaÅ¼[WartoÅ›Ä‡ netto] - SprzedaÅ¼[Koszt]
```

**Wynik w tabeli:**

| Kategoria | WartoÅ›Ä‡ netto | Koszt | MarÅ¼a PLN |
| --------- | ------------- | ----- | --------- |
| NAPOJE    | 1000          | 600   | **400**   |
| WINA      | 2000          | 1400  | **600**   |
| PRZEKÄ„SKI | 500           | 350   | **150**   |

- Obliczona dla **kaÅ¼dego wiersza** osobno
- WartoÅ›ci zapisane w modelu
- MoÅ¼esz filtrowaÄ‡: "pokaÅ¼ produkty gdzie MarÅ¼a PLN > 500"

### Jako miara:

```dax
DAX
MarÅ¼a PLN = SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto]) - SUM(SprzedaÅ¼[Koszt])
```

**Wynik na wizualizacji:**

- Bez filtrÃ³w: **1150** (suma wszystkich marÅ¼)
- Dla napojÃ³w: **400**
- Dla win: **600**
- WedÅ‚ug produktu: suma marÅ¼ w kaÅ¼dej kategorii
- Obliczana **dynamicznie** wedÅ‚ug kontekstu
- Nie zajmuje miejsca w pamiÄ™ci
- **Nie moÅ¼esz** filtrowaÄ‡ wierszy wedÅ‚ug tej wartoÅ›ci
    

---
# PuÅ‚apki
## NajczÄ™stsze bÅ‚Ä™dy poczÄ…tkujÄ…cych

### BÅ‚Ä…d 1: Tworzenie kolumny zamiast miary dla agregacji

```dax
DAX
// âŒ ZÅE - kolumna kalkulowana (niepotrzebnie zajmuje pamiÄ™Ä‡)
Suma WartoÅ›ci Kolumna = SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto])

// âœ… DOBRE - miara (dynamiczna, nie zajmuje pamiÄ™ci)
Suma WartoÅ›ci Miara = SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto])
```

### BÅ‚Ä…d 2: PrÃ³ba mnoÅ¼enia kolumn w miarze

```dax
DAX
// âŒ ZÅE - nie zadziaÅ‚a w miarze
WartoÅ›Ä‡ Brutto = SprzedaÅ¼[WartoÅ›Ä‡ netto] * 1.23

// âœ… DOBRE - agreguj najpierw
WartoÅ›Ä‡ Brutto = SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto]) * 1.23
```

### BÅ‚Ä…d 3: Zapominanie o agregacji w miarach

```dax
DAX
// âŒ ZÅE - w miarze musisz agregowaÄ‡
Åšrednia Cena = SprzedaÅ¼[WartoÅ›Ä‡ netto] / SprzedaÅ¼[IloÅ›Ä‡]

// âœ… DOBRE opcja 1 - zagregowane dzielenie
Åšrednia Cena = 
DIVIDE(
    SUM(SprzedaÅ¼[WartoÅ›Ä‡ netto]),
    SUM(SprzedaÅ¼[IloÅ›Ä‡])
)

// âœ… DOBRE opcja 2 - iteracyjne obliczenie Å›redniej
Åšrednia Cena = 
AVERAGEX(
    SprzedaÅ¼,
    DIVIDE(SprzedaÅ¼[WartoÅ›Ä‡ netto], SprzedaÅ¼[IloÅ›Ä‡])
)
```

---

## Kiedy uÅ¼ywaÄ‡ czego? - Decyzja

**UÅ¼yj kolumny kalkulowanej gdy:**

- âœ“ Potrzebujesz wartoÅ›ci do **filtrowania** (slicer, filtr)
- âœ“ Chcesz **grupowaÄ‡** wedÅ‚ug obliczonej wartoÅ›ci
- âœ“ WartoÅ›Ä‡ zaleÅ¼y tylko od **bieÅ¼Ä…cego wiersza**
- âœ“ MoÅ¼esz zapisaÄ‡ DAX **bez funkcji agregujÄ…cych**
- âœ“ PrzykÅ‚ad: "Kategoria wiekowa klienta", "DzieÅ„ tygodnia sprzedaÅ¼y", "Rabat kwotowy"

**UÅ¼yj miary gdy:**

- âœ“ Potrzebujesz **agregacji** (suma, Å›rednia, liczba)
- âœ“ Wynik ma byÄ‡ **dynamiczny** (zaleÅ¼ny od filtrÃ³w)
- âœ“ Chcesz **oszczÄ™dziÄ‡ pamiÄ™Ä‡** w modelu
- âœ“ W formule uÅ¼ywasz `SUM()`, `AVERAGE()`, `COUNT()`, itp.
- âœ“ PrzykÅ‚ad: "Suma sprzedaÅ¼y", "Liczba transakcji", "Åšrednia wartoÅ›Ä‡", "% udziaÅ‚"

---

## ZÅ‚ota zasada

> **JeÅ›li w formule uÅ¼ywasz funkcji agregujÄ…cej (`SUM`, `AVERAGE`, `COUNT`, itp.), prawie zawsze powinieneÅ› tworzyÄ‡ MIARÄ˜, nie kolumnÄ™.**

> **JeÅ›li moÅ¼esz napisaÄ‡ formuÅ‚Ä™ bez agregacji, tylko prostym odwoÅ‚aniem do kolumn (jak w Excelu), prawdopodobnie potrzebujesz KOLUMNY.**

